<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mascotas Disponibles - ADOPTAPP</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #f0f8ff, #e6e6fa); padding: 20px; }
        .header-title { font-size: 5rem; background: linear-gradient(45deg, #4682b4, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; }
        .header-subtitle { font-size: 1.2rem; color: #4a6fa5; text-align: center; margin-top: 0; margin-bottom: 30px; }
        .header-buttons { max-width: 900px; margin: 0 auto 30px; display: flex; gap: 15px; justify-content: center; }
        .header-btn { padding: 10px 20px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; color: white; transition: opacity 0.3s; text-decoration: none; }
        .btn-formulario { background: linear-gradient(90deg, #4a6fa5, #8a2be2); box-shadow: 0 4px 10px rgba(74, 107, 185, 0.4); }
        .btn-formulario:hover { opacity: 0.9; }
        .mascotas-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto; }
        .card { background-color: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); overflow: hidden; text-align: center; transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(138, 43, 226, 0.2); }
        .card-image { width: 100%; height: 200px; object-fit: cover; border-bottom: 3px solid #8a2be2; }
        .card-content { padding: 20px; }
        .card-content h3 { color: #1e3a8a; font-size: 1.8rem; margin-top: 0; margin-bottom: 10px; }
        .badges-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .badge { background-color: #d1e5f4; color: #1e3a8a; padding: 6px 12px; border-radius: 15px; font-size: 0.85rem; font-weight: 500; }
        .btn-adopcion { background: linear-gradient(90deg, #4CAF50, #69b36d); color: white; border: none; padding: 10px; border-radius: 20px; cursor: pointer; width: 100%; font-size: 1rem; font-weight: bold; transition: background-color 0.3s; }
        .btn-adopcion:hover { background: linear-gradient(90deg, #45a049, #5e9c61); }
        .no-mascotas-message { text-align: center; padding: 50px; background-color: white; border-radius: 15px; max-width: 600px; margin: 50px auto; color: #4a6fa5; }
    </style>
</head>
<body>

    <div class="header-title">ADOPTAPP</div>
    <div class="header-subtitle">Mascotas disponibles para adopci√≥n</div>
    
    <div class="header-buttons">
        <a href="index.html" class="header-btn btn-formulario">üìã Volver al Formulario de Adopci√≥n</a>
        <a href="adopciones_exito.html" class="header-btn btn-formulario" style="background: linear-gradient(90deg, #8a2be2, #4a6fa5);">üèÜ Adopciones Exitosas</a>
    </div>

    <div id="mascotas-grid" class="mascotas-grid"></div>

    <div id="no-mascotas" class="no-mascotas-message" style="display:none;">
        <h2>¬°Todas nuestras mascotas han sido adoptadas! üò¢</h2>
        <p>Gracias por tu inter√©s. Vuelve pronto, actualizamos nuestra lista constantemente.</p>
    </div>

    <script>
        // Base de datos inicial (solo si localStorage est√° vac√≠o)
        const MASCOTAS_INICIALES = [
            { id: 1, nombre: "Max", tipo: "Perro", raza: "Golden Retriever", edad: 2, tamano: "Mediano", sexo: "Macho", descripcion: "Muy juguet√≥n y cari√±oso.", disponible: true, url_imagen: "https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop" },
            { id: 2, nombre: "Luna", tipo: "Gato", raza: "Mestizo", edad: 1, tamano: "Peque√±o", sexo: "Hembra", descripcion: "Gata tranquila y afectuosa.", disponible: true, url_imagen: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR3Rgv_btOOzVFGFKUnr0M-EDd9ujJATK2g3Q&s" },
            { id: 3, nombre: "Rocky", tipo: "Perro", raza: "Bulldog", edad: 3, tamano: "Mediano", sexo: "Macho", descripcion: "Tranquilo y protector.", disponible: true, url_imagen: "https://images.unsplash.com/photo-1588943211346-0908a1fb0b01?w=400&h=300&fit=crop" },
            { id: 4, nombre: "Bella", tipo: "Gato", raza: "Mestizo", edad: 1, tamano: "Peque√±o", sexo: "Hembra", descripcion: "Gata energ√©tica y leal.", disponible: true, url_imagen: "https://images.unsplash.com/photo-1513360371669-4adf3dd7dff8?w=400&h=300&fit=crop" }
        ];

        function getMascotasDB() {
            const dbString = localStorage.getItem('mascotasDB');
            if (dbString) return JSON.parse(dbString);
            localStorage.setItem('mascotasDB', JSON.stringify(MASCOTAS_INICIALES));
            return MASCOTAS_INICIALES;
        }

        function saveMascotasDB(db) {
            localStorage.setItem('mascotasDB', JSON.stringify(db));
        }

        // Marca la mascota como seleccionada y la env√≠a al formulario
        function adoptarMascota(id) {
            const db = getMascotasDB();
            const mascota = db.find(m => m.id === id);
            if (!mascota) return;

            // Guardar selecci√≥n para el formulario
            localStorage.setItem('mascotaSeleccionadaForm', JSON.stringify({
                id: mascota.id,
                nombre: mascota.nombre,
                tipo: mascota.tipo,
                raza: mascota.raza,
                edad: mascota.edad,
                tamano: mascota.tamano,
                sexo: mascota.sexo
            }));

            // (Opcional) Marcar como no disponible inmediatamente
            mascota.disponible = false;
            saveMascotasDB(db);

            window.location.href = 'index.html';
        }

        function renderMascotas() {
            const db = getMascotasDB();
            const grid = document.getElementById('mascotas-grid');
            const noMascotas = document.getElementById('no-mascotas');
            grid.innerHTML = '';

            const disponibles = db.filter(m => m.disponible);
            if (disponibles.length === 0) {
                grid.style.display = 'none';
                noMascotas.style.display = 'block';
                return;
            }
            grid.style.display = 'grid';
            noMascotas.style.display = 'none';

            disponibles.forEach(m => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${m.url_imagen || 'https://via.placeholder.com/300x200?text=ADOPTAPP'}" alt="Imagen de ${m.nombre}" class="card-image">
                    <div class="card-content">
                        <h3>${m.nombre}</h3>
                        <div class="badges-container">
                            <span class="badge">Tipo: ${m.tipo}</span>
                            <span class="badge">Raza: ${m.raza || 'Mestizo'}</span>
                            <span class="badge">Edad: ${m.edad} a√±os</span>
                            <span class="badge">Tama√±o: ${m.tamano}</span>
                            <span class="badge">Sexo: ${m.sexo}</span>
                        </div>
                        <p>${m.descripcion || 'Mascota esperando un hogar cari√±oso.'}</p>
                        <button class="btn-adopcion" onclick="adoptarMascota(${m.id})">‚ù§Ô∏è ¬°Adoptar a ${m.nombre}!</button>
                    </div>`;
                grid.appendChild(card);
            });
        }

        document.addEventListener('DOMContentLoaded', renderMascotas);
    </script>
</body>
</html>
