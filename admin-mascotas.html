<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Gesti√≥n de Mascotas | Admin</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: #f4f6fb;
    padding: 30px;
}

h1 {
    text-align: center;
}

.card {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

.estado {
    font-weight: bold;
}

.disponible { color: #4CAF50; }
.adoptado { color: #f44336; }

.acciones {
    margin-top: 15px;
    display: flex;
    gap: 10px;
}

button {
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
}

.editar {
    background: #2196F3;
    color: white;
}

.eliminar {
    background: #f44336;
    color: white;
}

.volver {
    display: inline-block;
    margin-bottom: 20px;
    text-decoration: none;
    background: #673AB7;
    color: white;
    padding: 10px 18px;
    border-radius: 25px;
    font-weight: 600;
}
</style>
</head>

<body>

<script>
if (localStorage.getItem("adminLogueado") !== "true") {
    window.location.href = "admin.html";
}
</script>

<a href="admin-panel.html" class="volver">‚¨Ö Volver al Panel</a>

<h1>üêæ Gesti√≥n de Mascotas</h1>

<div id="listaMascotas"></div>

<script>
const contenedor = document.getElementById("listaMascotas");

function cargarMascotas() {
    contenedor.innerHTML = "";
    const mascotas = JSON.parse(localStorage.getItem("mascotasDB")) || [];

    if (mascotas.length === 0) {
        contenedor.innerHTML = "<p>No hay mascotas registradas.</p>";
        return;
    }

    mascotas.forEach(m => {
        const div = document.createElement("div");
        div.className = "card";

        div.innerHTML = `
            <h3>${m.nombre}</h3>
            <p><b>Tipo:</b> ${m.tipo}</p>
            <p><b>Raza:</b> ${m.raza || "Mestizo"}</p>
            <p><b>Edad:</b> ${m.edad}</p>
            <p class="estado ${m.disponible ? 'disponible' : 'adoptado'}">
                ${m.disponible ? "üü¢ Disponible" : "üî¥ Adoptado"}
            </p>

            ${
                m.disponible
                ? `
                <div class="acciones">
                    <button class="editar" onclick="editarMascota(${m.id})">‚úèÔ∏è Editar</button>
                    <button class="eliminar" onclick="eliminarMascota(${m.id})">üóë Eliminar</button>
                </div>
                `
                : `<p><i>No se puede modificar una mascota adoptada</i></p>`
            }
        `;

        contenedor.appendChild(div);
    });
}

function editarMascota(id) {
    const mascotas = JSON.parse(localStorage.getItem("mascotasDB")) || [];
    const mascota = mascotas.find(m => m.id === id);

    if (!mascota) return;

    const nuevoNombre = prompt("Nuevo nombre:", mascota.nombre);
    if (!nuevoNombre) return;

    const nuevaEdad = prompt("Nueva edad:", mascota.edad);
    if (!nuevaEdad) return;

    mascota.nombre = nuevoNombre;
    mascota.edad = nuevaEdad;

    localStorage.setItem("mascotasDB", JSON.stringify(mascotas));
    alert("Mascota actualizada correctamente ‚úÖ");
    cargarMascotas();
}

function eliminarMascota(id) {
    if (!confirm("‚ö†Ô∏è ¬øSeguro que deseas eliminar esta mascota?")) return;

    let mascotas = JSON.parse(localStorage.getItem("mascotasDB")) || [];
    mascotas = mascotas.filter(m => m.id !== id);

    localStorage.setItem("mascotasDB", JSON.stringify(mascotas));
    alert("Mascota eliminada correctamente üóë");
    cargarMascotas();
}

cargarMascotas();
</script>

</body>
</html>
